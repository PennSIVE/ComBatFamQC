% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/age_shiny.R
\name{age_table_gen}
\alias{age_table_gen}
\title{Generate Age Trend Summary Table}
\usage{
age_table_gen(result, q = "median", s = "F")
}
\arguments{
\item{result}{A data object containing prediction results and metadata.}

\item{q}{A string specifying the quantile of interest (e.g., \code{"quantile_50"} for the median).}

\item{s}{A string indicating the demographic group for which the summary table is generated:
\itemize{
\item \code{"F"} for female
\item \code{"M"} for male
\item \code{"F vs M"} for comparison between females and males
}}
}
\value{
A \code{datatable} object (from the \code{DT} package) containing the age trend summary table with the following columns:
\itemize{
\item \code{Age}: The age values at regular intervals (rounded to the nearest 10).
\item \code{Percentile.Volume}: The predicted volume values for the specified quantile (only for females or males).
\item \verb{PercentageChange (\%)}: The percentage change in volume between consecutive age intervals (only for females or males).
\item \code{Percentile.Volume_F}: The predicted volume values for females (when comparing genders).
\item \code{Percentile.Volume_M}: The predicted volume values for males (when comparing genders).
\item \verb{PercentageChange_F (\%)}: The percentage change for females (when comparing genders).
\item \verb{PercentageChange_M (\%)}: The percentage change for males (when comparing genders).
}
}
\description{
This function generates a summary table of age trend predictions for a specified quantile and demographic group.
The table includes the predicted volume values, percentage changes between age intervals, and other details
for either females, males, or a comparison between both genders.
}
\details{
The function processes the input data to filter predictions based on the specified quantile and demographic group.
It calculates percentage changes in predicted volume values for easier interpretation of trends. For gender comparisons
(\code{"F vs M"}), it generates side-by-side columns for females and males.

The output table is formatted using the \code{DT} package with additional features, such as CSV and Excel export options.
}
\examples{
# Initialize result to NULL for safety
age_list <- NULL

# Check if the previous results file exists and load it
if (file.exists("./tests/testthat/previous-results/age_list.rds")) {
  age_list <- readRDS("./tests/testthat/previous-results/age_list.rds")
}

# Use the result if it is available
if (!is.null(age_list)) {
  result <- age_list[[1]]
  age_table_gen(result, q = "median", s = "F")
} else {
  message("Age list is NULL. Please ensure the file exists and is accessible.")
}

}
